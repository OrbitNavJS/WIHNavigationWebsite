<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/threejs-icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three.js + TypeScript + Vite</title>
  </head>
  <body>
    <canvas id="scene"></canvas>
    <div id="content">
    <h1 id="headline">World-In-Hand Navigation</h1>
    <h4 id="subtitle"><i>An exploration into extending the Three.js Framework</i></h4>
    <br>
    <h3>About the project</h3>
    <p>Three.js is a popular JavaScript library used for 3D graphics and visualizations on the web.  
      As part of the seminar "Extending the Three.js Framework," hosted by the Department of Computer Graphics Systems at Hasso-Plattner-Institute, 
      our team embarked on a journey to make a different navigation approach possible. 
      The primary goal was to explore and implement features aimed at enhancing the existing navigation capabilities, 
      while also ensuring robustness and user-friendliness.</p>
    <h2>What is World-In-Hand Navigation?</h2>
    <h3>Navigation in virtual environments</h3>
    <p>
      Navigation is a critical aspect of user interaction within virtual environments, 
      allowing users to move around and explore the digital world effectively. In the realm of 3D graphics, 
      we experience virtual environments through the lens of a virtual camera. While users may feel as though they are directly 
      manipulating the scene, it is, in fact, the camera that is being moved. This can sometimes lead to a disconnect, 
      as the scene's spatial information is not always directly incorporated into the user's interaction.
    </p>
    <p>
      The "World-In-Hand" navigation approach aims to bridge this gap by providing users with a more intuitive and immersive navigation experience. 
      By allowing users to interact with the virtual world as if it were a tangible object in their hands, this method enhances the sense of presence 
      and control, making navigation more intuitive, robust, and user-friendly.
    </p>
    <h3>Navigation in Three.js</h3>
    <p>
      Three.js provides a range of navigation controls out of the box, including FlyControls, TrackballControls and OrbitControls, 
      with the latter being the most commonly used. These controls are available as add-ons and can be easily integrated into any Three.js project.
      Impartial to the scene, they respond to user input and adjust the camera accordingly.
      Like most navigation techniques, OrbitControls offer three primary modes of interaction: 
      translation, rotation, and zoom (techninally a dolly).
      However, these operations are focused on one predefined target point in the scene, limiting the flexibility to interact with the scene as a whole.
    </p>
    <h2>Our Approach</h2>
    <p>
      Our approach to World-In-Hand navigation is based on the exact mouse position projected onto the scene.
      This allows the user to grab a point or an object and move it around (panning),
      rotate the scene around that point (rotating) or the point in the center of the screen, and zoom in and out to the point.
      Try it in our demo above or under the following link: <a href="#">linklinklink</a>!
      You can use your mouse or interact through touch on mobile devices.
    </p>
    <h3>How it works</h3>
    <p>
      We calculate the exact mouse position by transforming the screen mouse position into normalized device coordinates (NDC)
      and reading the depth value from the depth buffer.
      Three.js's Vector3.unproject(camera) method allows us to transform the NDC into world coordinates.
      With these world coordinates we can then calculate precise movement vectors that we apply to the camera.      
    </p>
    <h3>Enhancing the Navigation</h3>
    <p>
      In addition to the core navigation features, we have implemented several basic enhancements to further improve the user experience.
      These efforts are based on the idea of resilient or constrained navigation:
      We aim to avoid potentially disorienting or confusing camera movements, such as flipping the scene upside down or moving the camera too far
      away, by constraining the camera's movement within certain limits.
      Our enhancements include:
      <ul>
        <li>Limiting the cameras distance from the scene</li>
        <li>Preventing the camera from flipping upside down</li>
        <li>Clamping the possible scene depth for the mouse</li>
        <li>Adjusting the camera's movement speed when zooming based on the scene's depth</li>
        <li>Giving the option to prohibit rotation below the ground plane</li>
        <li>Allowing the user to reset the camera to its initial position</li>
      </ul>

      Additionally, we have implemented a World-In-Hand-Controls Visualiser class. This feature allows developers using our navigation to 
      visualise the constraints listed as well as other helpful information such as the mouse position in the scene or the axes used for rotation.
      We believe this will assist developers in better understanding the navigation, adapting it to their needs, 
      and identifying and addressing potential future issues.
    </p>

    <h3>Using our navigation</h3>
    <p>
      Using our World-In-Hand navigation in your Three.js project is straightforward and requires only a few extra steps compared to 
      the standard OrbitControls.
      In general, we require you to use a WebGL2Renderer and render your scene into our custom WorldInHandControls.navigationRenderTarget
      to calculate the depth values for the mouse position.
      We have published a package on npm that you can install and use in your project. As an alternative, you can also download the source code
      from our GitHub repository. You can find further information on how to use our navigation under both links.
    </p>

    <h2>Summary & Future Work</h2>
    <p>
      In summary, our World-In-Hand navigation approach offers a more intuitive and immersive way to navigate virtual environments in Three.js.
      By allowing users to interact with the scene as if it were a tangible object in their hands, we aim to enhance the sense of presence and control,
      making navigation more intuitive, robust, and user-friendly.
      Our implementation includes core navigation features such as panning, rotating, and zooming, as well as several enhancements to improve the user experience.
      We have also developed a World-In-Hand-Controls Visualiser class to help developers better understand and adapt the navigation to their needs.
    </p>

    <p>
      In the future, our approach could be further refined and expanded by adding new features and capabilities, especially 
      regarding the resilience.
      Some potential areas for improvement include:
      <ul>
        <li>Implementing advanced constraints for camera movement when rotating</li>
        <li>Detecting and avoiding collisions between scene and camera</li>
      </ul>
      We also plan to create a pull request for Three.js to integrate our navigation into the examples similarly to the OrbitControls.
    </p>

    <h2>Attribution</h2>
    </div>

    <script type="module" src="/src/scene.ts"></script>
  </body>
</html>
